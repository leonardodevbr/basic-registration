"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/service-worker.js").then(()=>navigator.serviceWorker.ready).then(e=>e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:s("BOaIhryzDTBAIul7VSzXcW-1_YTpf1BayRTLUa7BuVj_cQk37P_WCr4nUgv4OedsLXGq3eUI80QjfT1nlqYsIRI")})).then(e=>fetch("/webpush/subscribe",{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').content},body:JSON.stringify(e)})).catch(e=>{console.error("Erro ao registrar push:",e)});function s(e){const a="=".repeat((4-e.length%4)%4),o=(e+a).replace(/-/g,"+").replace(/_/g,"/"),t=atob(o),n=new Uint8Array(t.length);for(let r=0;r<t.length;++r)n[r]=t.charCodeAt(r);return n}
